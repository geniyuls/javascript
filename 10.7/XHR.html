<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>XHR</title>
</head>
<body>

<button class="button" type="button">IP 불러오기</button>
<span class="ip">버튼을 클릭해 주세요.</span>

<script>

    const $button = document.body.querySelector('.button');
    const $ip = document.body.querySelector('.ip');
    $button.addEventListener('click', () => {
        const xhr = new XMLHttpRequest();
        xhr.onreadystatechange = () => {
            if(xhr.readyState !== XMLHttpRequest.DONE){
                return;
            }
            if(xhr.status < 200 || xhr.status >= 300){
                console.log('잘못됨')
                return;
            }
            console.log('잘 됨');
            let response = JSON.parse(xhr.responseText); //오브젝트나 배열로 바꿔줌.
        //                 JSON.parse('{"ip":"58.149.46.252"}');와 같음
            $ip.innerText = response['ip'];
        };
        xhr.open('GET', 'http://192.168.4.252:8080/');
        xhr.send();
        console.log('zzzzzz');
    });

</script>

</body>
</html>